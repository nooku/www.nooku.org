$(function(){module("bootstrap-modal");test("should provide no conflict",function(){var o=$.fn.modal.noConflict();ok(!$.fn.modal,"modal was set back to undefined (org value)");$.fn.modal=o});test("should be defined on jquery object",function(){var o=$("<div id='modal-test'></div>");ok(o.modal,"modal method is defined")});test("should return element",function(){var o=$("<div id='modal-test'></div>");ok(o.modal()==o,"document.body returned");$("#modal-test").remove()});test("should expose defaults var for settings",function(){ok($.fn.modal.defaults,"default object exposed")});test("should insert into dom when show method is called",function(){stop();$.support.transition=false;$("<div id='modal-test'></div>").bind("shown",function(){ok($("#modal-test").length,"modal insterted into dom");$(this).remove();start()}).modal("show")});test("should fire show event",function(){stop();$.support.transition=false;$("<div id='modal-test'></div>").bind("show",function(){ok(true,"show was called")}).bind("shown",function(){$(this).remove();start()}).modal("show")});test("should not fire shown when default prevented",function(){stop();$.support.transition=false;$("<div id='modal-test'></div>").bind("show",function(o){o.preventDefault();ok(true,"show was called");start()}).bind("shown",function(){ok(false,"shown was called")}).modal("show")});test("should hide modal when hide is called",function(){stop();$.support.transition=false;$("<div id='modal-test'></div>").bind("shown",function(){ok($("#modal-test").is(":visible"),"modal visible");ok($("#modal-test").length,"modal insterted into dom");$(this).modal("hide")}).bind("hidden",function(){ok(!$("#modal-test").is(":visible"),"modal hidden");$("#modal-test").remove();start()}).modal("show")});test("should toggle when toggle is called",function(){stop();$.support.transition=false;var o=$("<div id='modal-test'></div>");o.bind("shown",function(){ok($("#modal-test").is(":visible"),"modal visible");ok($("#modal-test").length,"modal insterted into dom");o.modal("toggle")}).bind("hidden",function(){ok(!$("#modal-test").is(":visible"),"modal hidden");o.remove();start()}).modal("toggle")});test("should remove from dom when click [data-dismiss=modal]",function(){stop();$.support.transition=false;var o=$("<div id='modal-test'><span class='close' data-dismiss='modal'></span></div>");o.bind("shown",function(){ok($("#modal-test").is(":visible"),"modal visible");ok($("#modal-test").length,"modal insterted into dom");o.find(".close").click()}).bind("hidden",function(){ok(!$("#modal-test").is(":visible"),"modal hidden");o.remove();start()}).modal("toggle")});test("should allow modal close with 'backdrop:false'",function(){stop();$.support.transition=false;var o=$("<div>",{id:"modal-test","data-backdrop":false});o.bind("shown",function(){ok($("#modal-test").is(":visible"),"modal visible");o.modal("hide")}).bind("hidden",function(){ok(!$("#modal-test").is(":visible"),"modal hidden");o.remove();start()}).modal("show")})});